<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>基于 CentOS 搭建 Ghost 博客</title>
      <link href="2020/10/18/%E5%9F%BA%E4%BA%8E-CentOS-%E6%90%AD%E5%BB%BA-Ghost-%E5%8D%9A%E5%AE%A2/"/>
      <url>2020/10/18/%E5%9F%BA%E4%BA%8E-CentOS-%E6%90%AD%E5%BB%BA-Ghost-%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="一-安装-nodejs-及相关包"><a class="markdownIt-Anchor" href="#一-安装-nodejs-及相关包"></a> 一、安装 Node.js 及相关包</h1><p><strong>安装 Node.js</strong><br>逐行输入下面的命令进行安装：</p><pre><code>yum update -yyum -y install nodejs</code></pre><p>安装成功后通过运行node -v及npm -v 出现版本号即可表示安装成功。</p><p>安装 Ghost Client （ghost-cli）</p><p><code>npm i -g ghost-cli</code></p><p>一般而言，安装成功后通过运行 ghost -v，出现版本号即可表示安装成功。但因为国内的网络问题，安装后请检查下终端的 log，如果有出现任意红色报错信息，则证明只有部分安装成功，需要重新执行命令安装。</p><p>如果不能正常安装请多次执行上面的命令。</p><h1 id="二-安装-ghost"><a class="markdownIt-Anchor" href="#二-安装-ghost"></a> 二、安装 Ghost</h1><p><strong>添加 Ghost 运行用户并创建目录</strong><br>请按行依次输入下面的命令</p><pre><code>adduser ghostmkdir /var/wwwmkdir /var/www/ghostchown ghost /var/www/ghost</code></pre><p><strong>安装 Ghost</strong><br>本教程以 SQLite3 作为 Ghost 的数据库。</p><pre><code>cd /var/www/ghostsu ghostghost install local --db=sqlite3</code></pre><p>安装成功的截图：</p><p>![-----2017-10-31—5.13.36](Ghost install local.png)<br><img src="/2020/10/18/%E5%9F%BA%E4%BA%8E-CentOS-%E6%90%AD%E5%BB%BA-Ghost-%E5%8D%9A%E5%AE%A2/_posts/%E5%9F%BA%E4%BA%8E-CentOS-%E6%90%AD%E5%BB%BA-Ghost-%E5%8D%9A%E5%AE%A2/-----2017-10-31---5.18.14.png" alt></p><p>如果你安装后不是类似上面的截图，则证明 Ghost-cli 没有安装成功；请重复执行上一步的“安装 Ghost Client”步骤。</p><p><strong>启动 Ghost</strong><br>安装成功后 Ghost 默认就已经启动的了，下面的命令分别是 Ghost 的停止、启动、重启命令，可尝试使用。</p><pre><code>ghost stopghost startghost restart</code></pre><p>当前若为root身份登陆，需用su ghost 更换用户身份，安装成功后默认是运行在http://localhost:2368/，如果需要对外访问，则需要通过 Nginx 进行反向代理。</p><h1 id="安装-nginx"><a class="markdownIt-Anchor" href="#安装-nginx"></a> 安装 Nginx</h1><p><strong>安装 Nginx</strong></p><pre><code>su rootyum install -y nginx</code></pre><p>如无意外，Nginx 将完成安装在你的服务器中。</p><p><img src="https://www.guopengzhen.com/content/images/2018/06/-----2017-10-31---5.18.14.png" alt="-----2017-10-31---5.18.14"></p><p>启动 Nginx<br>刚安装的 Nginx 不会自行启动，需要通过如下命令启动<br><code>systemctl start nginx.service</code></p><p>如果一切进展顺利的话，现在你可以通过你 IP( http://&lt;您的 CVM IP 地址&gt;/ )来访问你的 Web 页面来预览一下 Nginx 的默认页面。</p><p><img src="https://www.guopengzhen.com/content/images/2018/06/nginx_default.png" alt="nginx_default"></p><p>如果看到上面的页面,那么说明你的 CentOS 中的 Nginx 已经正确安装。</p><p>另外还可以通过systemctl enable nginx.service命令加入开机启动项。</p><p><strong>Nginx 配置反向代理</strong></p><p>修改 config 文件<br>请确保 Ghost 已经在运行阶段方可进行如下操作。<br><code>vi /etc/nginx/conf.d/default.conf</code><br>运行上面的命令后，再键入 i 然后移动光标在约第七行修改相关文件代码：</p><pre><code>location / &#123;        root   /usr/share/nginx/html;        index  index.html index.htm;    &#125;</code></pre><p>改为：</p><pre><code>location / &#123;        proxy_pass http://127.0.0.1:2368;        proxy_redirect default;        root   /usr/share/nginx/html;        index  index.html index.htm;    &#125;</code></pre><p>完成后通过按 ESC ，随后输入 :wq 回车保存。</p><p>然后运行 nginx -s reload 重启 Nginx。</p><h1 id="ghost-的界面管理"><a class="markdownIt-Anchor" href="#ghost-的界面管理"></a> Ghost 的界面管理</h1><p>首页<br>完成了上面的步骤之后，访问http://&lt;您的 CVM IP 地址&gt;/ 就能看到 Ghost 的默认页面：</p><p>管理界面<br>访问http://&lt;您的 CVM IP 地址&gt;/ghost 就可以继续相关写作设置了。</p><p><strong>长时间运行</strong></p><pre><code>pm2 start ./versions/1.24.6/index.js</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> 程序猿的学习笔记 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>

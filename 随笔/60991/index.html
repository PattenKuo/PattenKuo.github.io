<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Qt's 'Property Binding'(Qt的'属性绑定') | 郭鹏真PattenKuo的博客</title><meta name="keywords" content="原创拙笔,随笔"><meta name="author" content="郭鹏真PattenKuo"><meta name="copyright" content="郭鹏真PattenKuo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="Translated from the　original page(Qt Documentation&gt;Qt5.11Qt QML&gt;Property Binding)  Property Binding  属性绑定 An object’s property can be assigned a static value which stays constant until it is exp">
<meta property="og:type" content="article">
<meta property="og:title" content="Qt&#39;s &#39;Property Binding&#39;(Qt的&#39;属性绑定&#39;)">
<meta property="og:url" content="https://guopengzhen.com/%E9%9A%8F%E7%AC%94/60991/index.html">
<meta property="og:site_name" content="郭鹏真PattenKuo的博客">
<meta property="og:description" content="Translated from the　original page(Qt Documentation&gt;Qt5.11Qt QML&gt;Property Binding)  Property Binding  属性绑定 An object’s property can be assigned a static value which stays constant until it is exp">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://guopengzhen.com/img/ArticalCover.jpg">
<meta property="article:published_time" content="2020-10-25T13:18:38.000Z">
<meta property="article:modified_time" content="2020-10-25T13:21:48.189Z">
<meta property="article:author" content="郭鹏真PattenKuo">
<meta property="article:tag" content="原创拙笔">
<meta property="article:tag" content="随笔">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://guopengzhen.com/img/ArticalCover.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://guopengzhen.com/%E9%9A%8F%E7%AC%94/60991/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin="crossorigin"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta name="360-site-verification" content="89d1ebd5a1eb3151d51240867c24a57e"/><meta name="yandex-verification" content="0557569d0f8ae26b"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?1508b58379fb497f1ca8ce5eeb12737f";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-180790879-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-180790879-1');
</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.2.0',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 郭鹏真PattenKuo","link":"链接: ","source":"来源: 郭鹏真PattenKuo的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-10-25 21:21:48'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {
  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }

  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }
})()</script><meta name="generator" content="Hexo 5.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avater.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">140</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">19</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#property-binding"><span class="toc-number">1.</span> <span class="toc-text"> Property Binding</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A"><span class="toc-number">2.</span> <span class="toc-text"> 属性绑定</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#overview"><span class="toc-number">3.</span> <span class="toc-text"> Overview</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">4.</span> <span class="toc-text"> 概述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#creating-property-bindings-from-javascript"><span class="toc-number">5.</span> <span class="toc-text"> Creating Property Bindings from JavaScript</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%9F%BA%E4%BA%8Ejavascript%E7%9A%84%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A"><span class="toc-number">6.</span> <span class="toc-text"> 创建基于JavaScript的属性绑定</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#debugging-overwriting-of-bindings"><span class="toc-number">7.</span> <span class="toc-text"> Debugging overwriting of bindings</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E8%A6%86%E7%9B%96%E7%BB%91%E5%AE%9A"><span class="toc-number">8.</span> <span class="toc-text"> 调试覆盖绑定</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#using-this-with-property-binding"><span class="toc-number">9.</span> <span class="toc-text"> Using this with Property Binding</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8property-binding"><span class="toc-number">10.</span> <span class="toc-text"> 使用Property Binding</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(/img/ArticalCover.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">郭鹏真PattenKuo的博客</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Qt's 'Property Binding'(Qt的'属性绑定')</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-10-25T13:18:38.000Z" title="发表于 2020-10-25 21:18:38">2020-10-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-10-25T13:21:48.189Z" title="更新于 2020-10-25 21:21:48">2020-10-25</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>9分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p><em>Translated from the　original page</em>(<a target="_blank" rel="noopener" href="http://doc.qt.io/qt-5/qtqml-syntax-propertybinding.html">Qt Documentation&gt;Qt5.11Qt QML&gt;Property Binding</a>)</p>
<h1 id="property-binding"><a class="markdownIt-Anchor" href="#property-binding"></a> Property Binding</h1>
<h1 id="属性绑定"><a class="markdownIt-Anchor" href="#属性绑定"></a> 属性绑定</h1>
<p>An object’s property can be assigned a static value which stays constant until it is explicitly assigned a new value. However, to make the fullest use of QML and its built-in support for dynamic object behaviors, most QML objects use property bindings.</p>
<p>可以为一个对象的属性分配一个静态值，该值在分配明确的新值之前保持不变。 但是，为了充分利用QML及其对动态对象行为的内置支持，大多数QML对象都使用<strong>属性绑定</strong>。</p>
<p>Property bindings are a core feature of QML that lets developers specify relationships between different object properties. When a property’s dependencies change in value, the property is automatically updated according to the specified relationship.</p>
<p>属性绑定是QML的核心功能，它允许开发人员指定不同对象属性之间的关系。当一个属性的依赖项值发生变化时，该属性将根据指定的关系自动更新。</p>
<h1 id="overview"><a class="markdownIt-Anchor" href="#overview"></a> Overview</h1>
<h1 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h1>
<p>To create a property binding, a property is assigned a JavaScript expression that evaluates to the desired value. At its simplest, a binding may be a reference to another property. Take the following example, where the blue <a target="_blank" rel="noopener" href="http://doc.qt.io/qt-5/qml-qtquick-rectangle.html">Rectangle</a>’s height is bound to the height of its parent:</p>
<p>去创建一个属性绑定时，该属性会被分配一个Javascript表达式，该表达式的计算结果即是要分配的值。最简单的是，一个绑定肯是另一个属性的引用。通过下面的例子，一个蓝色<a target="_blank" rel="noopener" href="http://doc.qt.io/qt-5/qml-qtquick-rectangle.html">Rectangle</a>的高度被绑定到父类的高度：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Rectangle &#123;</span><br><span class="line">    width: 200; height: 200</span><br><span class="line"></span><br><span class="line">    Rectangle &#123;</span><br><span class="line">        width: 100</span><br><span class="line">        height: parent.height</span><br><span class="line">        color: &quot;blue&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Whenever the height of the parent rectangle changes, the height of the blue rectangle automatically updates to be of the same value.</p>
<p>只要父类rectangle的高度变化，该蓝色Rectangle的高度将会自动更新为相同的值。</p>
<p>A binding can contain any valid JavaScript expression or statement, as QML uses a standards compliant JavaScript engine. Bindings can access object properties, call methods and use built-in JavaScript objects such as Date and Math. Below are other possible bindings for the previous example:</p>
<p>因为ＱＭＬ使用符合标准的JavaScript引擎，绑定可以包含任何一个有效的JavaScript表达式或者声明。绑定可以访问对象属性，调用方法并使用诸如Date和Math的内置JavaScript对象。以下是前一个例子的其他可能的绑定：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">height: parent.height &#x2F; 2</span><br><span class="line"></span><br><span class="line">height: Math.min(parent.width, parent.height)</span><br><span class="line"></span><br><span class="line">height: parent.height &gt; 100 ? parent.height : parent.height&#x2F;2</span><br><span class="line"></span><br><span class="line">height: &#123;</span><br><span class="line">    if (parent.height &gt; 100)</span><br><span class="line">        return parent.height</span><br><span class="line">    else</span><br><span class="line">        return parent.height &#x2F; 2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">height: someMethodThatReturnsHeight()</span><br></pre></td></tr></table></figure>
<p>Below is a more complex example involving more objects and types:<br>
以下是包含更多对象和类型的更复杂的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Column &#123;</span><br><span class="line">    id: column</span><br><span class="line">    width: 200</span><br><span class="line">    height: 200</span><br><span class="line"></span><br><span class="line">    Rectangle &#123;</span><br><span class="line">        id: topRect</span><br><span class="line">        width: Math.max(bottomRect.width, parent.width&#x2F;2)</span><br><span class="line">        height: (parent.height &#x2F; 3) + 10</span><br><span class="line">        color: &quot;yellow&quot;</span><br><span class="line"></span><br><span class="line">        TextInput &#123;</span><br><span class="line">            id: myTextInput</span><br><span class="line">            text: &quot;Hello QML!&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Rectangle &#123;</span><br><span class="line">        id: bottomRect</span><br><span class="line">        width: 100</span><br><span class="line">        height: 50</span><br><span class="line">        color: myTextInput.text.length &lt;&#x3D; 10 ? &quot;red&quot; : &quot;blue&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In the previous example,</p>
<blockquote>
<p>topRect.width depends on bottomRect.width and column.width<br>
topRect.height depends on column.height<br>
bottomRect.color depends on myTextInput.text.length</p>
</blockquote>
<p>在前一个例子中，</p>
<blockquote>
<p>topRect.width 取决于 bottomRect.width 和 column.width<br>
topRect.height 取决于 column.height<br>
bottomRect.color取决于 myTextInput.text.length</p>
</blockquote>
<p>Syntactically, bindings are allowed to be of arbitrary complexity. However, if a binding is overly complex - such as involving multiple lines, or imperative loops - it could indicate that the binding is being used for more than describing property relationships. Complex bindings can reduce code performance, readability, and maintainability. It may be a good idea to redesign components that have complex bindings, or at least factor the binding out into a separate function.</p>
<p>从语法上讲，允许绑定具有任意的复杂性。但是，如果一个绑定过于复杂－－比如包含多行，或强制性循环－则表明绑定可能不仅仅用于描述属性关系。复杂的绑定会降低代码的性能，可读性和可维护性。重定义具有复杂绑定的空间，或至少将绑定分解为单独的函数可能会更好。</p>
<h1 id="creating-property-bindings-from-javascript"><a class="markdownIt-Anchor" href="#creating-property-bindings-from-javascript"></a> Creating Property Bindings from JavaScript</h1>
<h1 id="创建基于javascript的属性绑定"><a class="markdownIt-Anchor" href="#创建基于javascript的属性绑定"></a> 创建基于JavaScript的属性绑定</h1>
<p>A property with a binding is automatically updated as necessary. However, if the property is later assigned a static value from a JavaScript statement, the binding will be removed.<br>
具有绑定的属性会根据需要自动更新。但是，如果后来通过从JavaScript语句为属性分配了静态值，则将删除绑定。</p>
<p>For example, the Rectangle below initially ensures that its height is always twice its width. However, when the space key is pressed, the current value of width*3 will be assigned to height as a static value. After that, the height will remain fixed at this value, even if the width changes. The assignment of the static value removes the binding.</p>
<p>例如，下面的长方形（Rectangle）最初确定了其高度（height）永远是其宽度（width）的两倍。但是，当按下空格键时，当前width*3的值将被赋值给高度作为一个静态值（常量）。之后，即使宽度改变，高度也将固定保持在这个值。静态值的赋值解除了绑定。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import QtQuick 2.0</span><br><span class="line"></span><br><span class="line">Rectangle &#123;</span><br><span class="line">    width: 100</span><br><span class="line">    height: width * 2</span><br><span class="line"></span><br><span class="line">    focus: true</span><br><span class="line">    Keys.onSpacePressed: &#123;</span><br><span class="line">        height &#x3D; width * 3</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If the intention is to give the rectangle a fixed height and stop automatic updates, then this is not a problem. However, if the intention is to establish a new relationship between width and height, then the new binding expression must be wrapped in the Qt.binding() function instead:<br>
如果打算给矩形一个固定的高度并停止自动更新，那么这不是问题。 但是，如果打算在宽度和高度之间建立新的关系，那么新的绑定表达式必须包含在Qt.binding（）函数中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import QtQuick 2.0</span><br><span class="line"></span><br><span class="line">Rectangle &#123;</span><br><span class="line">    width: 100</span><br><span class="line">    height: width * 2</span><br><span class="line"></span><br><span class="line">    focus: true</span><br><span class="line">    Keys.onSpacePressed: &#123;</span><br><span class="line">        height &#x3D; Qt.binding(function() &#123; return width * 3 &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now, after the space key is pressed, the rectangle’s height will continue auto-updating to always be three times its width.<br>
现在，按下空格键后，矩形的高度将继续自动更新，始终为宽度的三倍。</p>
<h1 id="debugging-overwriting-of-bindings"><a class="markdownIt-Anchor" href="#debugging-overwriting-of-bindings"></a> Debugging overwriting of bindings</h1>
<h1 id="调试覆盖绑定"><a class="markdownIt-Anchor" href="#调试覆盖绑定"></a> 调试覆盖绑定</h1>
<p>A common cause of bugs in QML applications is accidentally overwriting bindings with static values from JavaScript statements. To help developers track down problems of this kind, the QML engine is able to emit messages whenever a binding is lost due to imperative assignments.<br>
QML应用程序中的错误的常见原因是不慎地使用JavaScript语句中的静态值覆盖绑定。为了去帮开发者追踪这类问题，QML引擎会在绑定因为强制赋值而丢失时发出信息。</p>
<p>In order to generate such messages, you need to enable the informational output for the qt.qml.binding.removal logging category, for instance by calling:<br>
为了生成此类消息，您需要为qt.qml.binding.removal日志记录类别启用信息输出，例如通过调用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QLoggingCategory::setFilterRules(QStringLiteral(&quot;qt.qml.binding.removal.info&#x3D;true&quot;));</span><br></pre></td></tr></table></figure>
<p>Please refer to the <a target="_blank" rel="noopener" href="http://doc.qt.io/qt-5/qloggingcategory.html">QLoggingCategory</a> documentation for more information about enabling output from logging categories.<br>
有关从日志记录类别启用输出的详细信息，请参阅<a target="_blank" rel="noopener" href="http://doc.qt.io/qt-5/qloggingcategory.html">QLoggingCategory</a>文档。</p>
<p>Note that is perfectly reasonable in some circumstances to overwrite bindings. Any message generated by the QML engine should be treated as a diagnostic aid, and not necessarily as evidence of a problem without further investigation.</p>
<p>请注意，在一些情况下重写绑定是完全合理的。通过ＱＭＬ生成的任何信息应该被视作辅助的诊断，在没有进一步调查的情况下，不能视作是问题的必要证据。</p>
<h1 id="using-this-with-property-binding"><a class="markdownIt-Anchor" href="#using-this-with-property-binding"></a> Using this with Property Binding</h1>
<h1 id="使用property-binding"><a class="markdownIt-Anchor" href="#使用property-binding"></a> 使用Property Binding</h1>
<p>When creating a property binding from JavaScript, the this keyword can be used to refer to the object which receives the binding. This is helpful for resolving ambiguities with property names.<br>
当通过JavaScript创建属性绑定的时候，this关键字可用于引用接收绑定的对象。这有助于解决属性名称的歧义问题。</p>
<p>For example, the Component.onCompleted handler below is defined within the scope of the <a target="_blank" rel="noopener" href="http://doc.qt.io/qt-5/qml-qtquick-item.html">Item</a>. In this scope, width refers to the Item’s width, not the <a target="_blank" rel="noopener" href="http://doc.qt.io/qt-5/qml-qtquick-rectangle.html">Rectangle</a>’s width. To bind the Rectangle’s height to its own width, the binding expression must explicitly refer to this.width (or alternatively, rect.width):</p>
<p>例如，下面的Component.onCompleted处理程序在<a target="_blank" rel="noopener" href="http://doc.qt.io/qt-5/qml-qtquick-item.html">Item</a>的范围内被定义。在此范围中，width指的是Item的宽度，而不是<a target="_blank" rel="noopener" href="http://doc.qt.io/qt-5/qml-qtquick-rectangle.html">Rectangle</a>的宽度。 要将Rectangle的高度绑定到自己的宽度，绑定表达式必须显式引用this.width（或者rect.width）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Item &#123;</span><br><span class="line">    width: 500</span><br><span class="line">    height: 500</span><br><span class="line"></span><br><span class="line">    Rectangle &#123;</span><br><span class="line">        id: rect</span><br><span class="line">        width: 100</span><br><span class="line">        color: &quot;yellow&quot;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Component.onCompleted: &#123;</span><br><span class="line">        rect.height &#x3D; Qt.binding(function() &#123; return this.width * 2 &#125;)</span><br><span class="line">        console.log(&quot;rect.height &#x3D; &quot; + rect.height) &#x2F;&#x2F; prints 200, not 1000</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note: The value of this is not defined outside of property bindings. See <a target="_blank" rel="noopener" href="http://doc.qt.io/qt-5/qtqml-javascript-hostenvironment.html#javascript-environment-restrictions">JavaScript Environment Restrictions</a> for details.<br>
注意：此值未在属性绑定之外定义。 有关详细信息，请参阅<a target="_blank" rel="noopener" href="http://doc.qt.io/qt-5/qtqml-javascript-hostenvironment.html#javascript-environment-restrictions">JavaScript环境限制</a>。</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">郭鹏真PattenKuo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://guopengzhen.com/%E9%9A%8F%E7%AC%94/60991/">https://guopengzhen.com/%E9%9A%8F%E7%AC%94/60991/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://guopengzhen.com" target="_blank">郭鹏真PattenKuo的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%8E%9F%E5%88%9B%E6%8B%99%E7%AC%94/">原创拙笔</a><a class="post-meta__tags" href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a></div><div class="post_share"><div class="social-share" data-image="/img/ArticalCover.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.png" target="_blank"><img class="post-qr-code-img" src="/img/wechat.png" alt="Wechat Pay"/></a><div class="post-qr-code-desc">Wechat Pay</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="Alipay"/></a><div class="post-qr-code-desc">Alipay</div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/58048/"><img class="prev-cover" src="https://guopengzhen.com/程序猿的学习笔记/58048/--_031.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">跨平台系统图／流程图／架构图编辑器　Dia for linux(ubuntu etc.) Windows Mac OS</div></div></a></div><div class="next-post pull-right"><a href="/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/37980/"><img class="next-cover" src="/img/ArticalCover.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">When run 'git clone' error: RPC failed; curl 56 GnuTLS recv error (-54): Error in the pull function</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/随笔/65069/" title="2010-2013杂诗三首"><img class="cover" src="https://guopengzhen.com/%E9%9A%8F%E7%AC%94/65069/cg.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-22</div><div class="title">2010-2013杂诗三首</div></div></a></div><div><a href="/随笔/7903/" title="2018/8骑行西藏行程安排、路线图及装备清单"><img class="cover" src="https://guopengzhen.com/%E9%9A%8F%E7%AC%94/7903/wmsq.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-24</div><div class="title">2018/8骑行西藏行程安排、路线图及装备清单</div></div></a></div><div><a href="/随笔/13853/" title="My views on February 28 Incident"><img class="cover" src="https://guopengzhen.com/%E9%9A%8F%E7%AC%94/13853/228.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-20</div><div class="title">My views on February 28 Incident</div></div></a></div><div><a href="/随笔/30286/" title="WanWan President Election In LuLus Eyes(script)"><img class="cover" src="https://guopengzhen.com/%E9%9A%8F%E7%AC%94/30286/tw.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-20</div><div class="title">WanWan President Election In LuLus Eyes(script)</div></div></a></div><div><a href="/随笔/55515/" title="《工程伦理学》课程感想"><img class="cover" src="https://guopengzhen.com/%E9%9A%8F%E7%AC%94/55515/gcllx.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-19</div><div class="title">《工程伦理学》课程感想</div></div></a></div><div><a href="/随笔/62765/" title="《惠普之道》随想"><img class="cover" src="https://guopengzhen.com/%E9%9A%8F%E7%AC%94/62765/hpzd.jpg"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-19</div><div class="title">《惠普之道》随想</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="comment-switch"><span class="first-comment">Valine</span><label><input id="switch-comments-btn" type="checkbox"/><span class="slider"></span></label><span class="second-comment">Disqus</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="disqus_thread"></div></div></div></div></article></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 By 郭鹏真PattenKuo</div><div class="framework-info"><span>Powered by </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const initData = {
      el: '#vcomment',
      appId: 'q3J83vICPB2taER4oq48LBuV-gzGzoHsz',
      appKey: 'Sme7y8okowBtcEXM8OqIfQVf',
      placeholder: '来都来了，随便说两句吧！',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: true,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }

    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'https://guopengzhen.com/%E9%9A%8F%E7%AC%94/60991/'
    this.page.identifier = '随笔/60991/'
    this.page.title = 'Qt's 'Property Binding'(Qt的'属性绑定')'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Valine' === 'Disqus' || !false) {
  if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config_change',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: true,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  $('script[data-pjax]').each(function () {
    $(this).parent().append($(this).remove())
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  if (typeof gtag === 'function') {
    gtag('config', 'UA-180790879-1', {'page_path': window.location.pathname});
  }

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  $(window).off('scroll')

  //reset readmode
  $('body').hasClass('read-mode') && $('body').removeClass('read-mode')

})</script><script>(function(){
  const bp = document.createElement('script');
  const curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https'){
  bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  bp.dataset.pjax = ''
  const s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})()</script></div></body></html>